
####################### DESCRIPTION ########################

description text="[[
# Example B1: Time-series population observations for PBM

## Objective
- Inference is done using time-series population data.

## Data
- On the 'Inference→Data' page, data is added that gives a time-series estimate for the number of individuals in the $I$ compartment.

## Model
- A single population-based species 'People' is created.
- This contains a classification 'DS' which stands for 'disease status'.
- DS contains two compartments: susceptible $S$ and infected $I$. Together they are known as the “SI model”.
- A transmission rate $β$ determines the rate at which individuals become infected.

## Population
- This consists of 100 initially susceptible individuals and one infected.
]]"


######################### DETAILS ##########################

simulation start=0 end=100 timestep=0.5

inference start=0 end=100 timestep=0.5 update=1000 nchain=1

post-sim start=0 end=100


######### DEFINE MODEL AND DATA FOR SPECIES PEOPLE #########

species name="People" type="population"

# SPECIES MODEL

class name="DS" index="a"

view x=0 y=0 scale=1

comp name="S" color="#009900" x=-10 y=0
comp name="I" color="#ff2222" x=10 y=0

trans name="S->I" value="exp(rate:β×{I}+(a+b))"

# SIMULATION INITIAL CONDITIONS

init-pop-sim type="fixed" focal="DS" file="[[
"Compartment","Population"
"S",100
"I",1
]]"


# INFERENCE DATA

init-pop-inf type="fixed" file="[[
"DS","Population"
"S",100
"I",1
]]"

pop-data name="Population data" filter="DS=I" error="normal:10%" file="[[
"t","Population"
20,3
40,12
60,62
80,93
100,100
]]"



######################## PARAMETERS ########################

param name="a" prior="uniform(0.,0.01)"

param name="b" prior="uniform(0.,0.01)"

param name="β" value="0.001" prior="fix(0.001)"



